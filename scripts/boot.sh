#!/bin/bash
SECTORSIZE=512
KERNEL_BINARY_LOCATION=kernel/kernel.bin
KERNEL_BINARY_FILESIZE=$(stat -c%s "$KERNEL_BINARY_LOCATION")
echo "Size of $KERNEL_BINARY_LOCATION = $KERNEL_BINARY_FILESIZE bytes."
BOOT1_BINARY_LOCATION=bootloader/boot1.bin
BOOT1_BINARY_FILESIZE=$(stat -c%s "$BOOT1_BINARY_LOCATION")
echo "Size of $BOOT1_BINARY_LOCATION = $BOOT1_BINARY_FILESIZE bytes."
KERNEL_BINARY_ROUNDUP_SIZE=$((KERNEL_BINARY_FILESIZE+SECTORSIZE))
KERNEL_BINARY_FINAL_SIZE=$((KERNEL_BINARY_ROUNDUP_SIZE/SECTORSIZE))
echo "$KERNEL_BINARY_FINAL_SIZE" > bootloader/boot0.h